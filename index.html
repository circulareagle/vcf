<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>NaijaPro Contact Gain</title>
    <meta name="description" content="Discover verified Nigerian WhatsApp contacts to supercharge your business growth. Naija Pro Contact Gain offers affordable files with thousands of active leads for marketing, networking and sales expansion in Nigeria. Ideal for entrepreneurs and influencers.">
    <link rel="canonical" href="https://applifier.name.ng/vcf">
    
    <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Your Website Name"> <meta property="og:title" content="NaijaPro Contact Gain | Applifier">
    <meta property="og:description" content="Discover verified Nigerian WhatsApp contacts to supercharge your business growth. Naija Pro Contact Gain offers affordable files with thousands of active leads for marketing, networking and sales expansion in Nigeria. Ideal for entrepreneurs and influencers.">
    <meta property="og:image" content="https://applifier.name.ng/social-share-image.jpg">
    <meta property="og:url" content="https://applifier.name.ng/vcf">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="NaijaPro Contact Gain | Applifier">
    <meta name="twitter:description" content="Discover verified Nigerian WhatsApp contacts to supercharge your business growth. Naija Pro Contact Gain offers affordable files with thousands of active leads for marketing, networking and sales expansion in Nigeria. Ideal for entrepreneurs and influencers.">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Applifier",
      "url": "https://applifier.name.ng/vcf"
    }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://3nbf4.com/act/files/tag.min.js?z=10469713" data-cfasync="false" async></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        
        :root {
            --primary: #059669;
            --primary-dark: #064e3b;
            --vcf-red: #ef4444;
            --vcf-grey: #94a3b8;
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            -webkit-tap-highlight-color: transparent; 
            background-color: #f8fafc;
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        
        @keyframes slideUp { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }

        .nav-item.active { color: var(--primary); }
        .nav-item.active i { transform: translateY(-4px); transition: transform 0.3s ease; }
        
        .input-focus:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(5, 150, 105, 0.1);
        }
        
        #custom-alert, #whatsapp-promo, #verify-modal { display: none; }

        .pipeline-container {
            width: 100%;
            height: 12px;
            background: #e2e8f0;
            border-radius: 999px;
            position: relative;
            overflow: hidden;
            border: 1px solid #cbd5e1;
        }
        .pipeline-fill {
            height: 100%;
            transition: width 0.8s ease-in-out;
            background: repeating-linear-gradient(
                45deg,
                var(--vcf-red),
                var(--vcf-red) 10px,
                #dc2626 10px,
                #dc2626 20px
            );
        }
        .pipeline-empty { background: #cbd5e1 !important; }

        @keyframes scan {
            0% { top: 0%; }
            50% { top: 100%; }
            100% { top: 0%; }
        }
        .scanner-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: rgba(16, 185, 129, 0.5);
            box-shadow: 0 0 8px #10b981;
            animation: scan 2s linear infinite;
        }
    </style>
</head>
<body class="text-slate-900 pb-28">

    <header class="bg-white border-b border-slate-100 p-5 sticky top-0 z-40">
        <div class="max-w-md mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-xl font-800 tracking-tight text-emerald-900 flex items-center gap-2">
                    <span class="bg-emerald-600 text-white p-1 rounded-lg"><i data-lucide="briefcase" class="w-5 h-5"></i></span>
                    NaijaPro Contact Gain
                </h1>
                <p class="text-[10px] font-bold text-emerald-600/60 uppercase tracking-widest mt-1">Commercial Networking Only</p>
            </div>
            <div id="user-status" class="flex gap-2 items-center"></div>
        </div>
    </header>

    <!-- Verification Modal (Simplified) -->
    <div id="verify-modal" class="fixed inset-0 z-[60] flex items-center justify-center p-6 bg-slate-900/80 backdrop-blur-sm">
        <div class="bg-white rounded-3xl p-8 max-w-sm w-full shadow-2xl relative overflow-hidden">
            <div class="scanner-line"></div>
            <div class="text-center mb-6">
                <div class="inline-block p-3 bg-emerald-50 rounded-2xl mb-4">
                    <i data-lucide="share-2" class="text-emerald-600 w-8 h-8 animate-bounce"></i>
                </div>
                <h3 class="text-xl font-bold text-slate-900">Unlocking Batch</h3>
                <p class="text-xs text-slate-400 mt-1">Thank you for sharing!</p>
            </div>
            <div class="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden">
                <div id="verify-progress" class="h-full bg-emerald-500 transition-all duration-300" style="width: 100%"></div>
            </div>
        </div>
    </div>

    <!-- Alert Modal -->
    <div id="custom-alert" class="fixed inset-0 z-50 flex items-center justify-center p-6 bg-slate-900/40 backdrop-blur-md">
        <div class="bg-white rounded-3xl p-8 max-w-sm w-full shadow-2xl">
            <div id="alert-icon" class="mb-4 text-center"></div>
            <h3 id="alert-title" class="text-xl font-bold text-slate-900 mb-2 text-center">Notice</h3>
            <p id="alert-message" class="text-sm text-slate-600 mb-8 leading-relaxed text-center"></p>
            <button onclick="closeAlert()" class="w-full bg-emerald-600 text-white font-bold py-4 rounded-2xl transition-all active:scale-95 shadow-lg shadow-emerald-200">Got it!</button>
        </div>
    </div>

    <!-- WhatsApp Channel Promo Modal -->
    <div id="whatsapp-promo" class="fixed inset-0 z-50 flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-md">
        <div class="bg-white rounded-3xl p-8 max-w-sm w-full shadow-2xl text-center">
            <div class="bg-emerald-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                <i data-lucide="bell" class="text-emerald-600 w-8 h-8"></i>
            </div>
            <h3 class="text-xl font-bold text-slate-900 mb-2">Stay Updated!</h3>
            <p class="text-sm text-slate-600 mb-8 leading-relaxed">Join our Official WhatsApp Channel to get instant notifications whenever new VCF batches are uploaded.</p>
            <div class="space-y-3">
                <a href="https://whatsapp.com/channel/0029VbC3ITpHVvTZ5btPTn0h" target="_blank" class="block w-full bg-emerald-600 text-white font-bold py-4 rounded-2xl shadow-lg shadow-emerald-200">Join Channel Now</a>
                <button onclick="closePromo()" class="w-full text-slate-400 font-bold py-2 text-sm">Proceed to Files</button>
            </div>
        </div>
    </div>

    <main class="max-w-md mx-auto p-5">
        
        <!-- REGISTRATION SECTION -->
        <section id="tab-home" class="tab-content active space-y-6">
            <div id="member-view" class="hidden space-y-6">
                <div class="bg-emerald-600 rounded-3xl p-8 text-white shadow-xl">
                    <h2 class="text-2xl font-bold">Welcome Back!</h2>
                    <p class="text-sm opacity-90 mt-2">You are a verified member. Access your VCF files below.</p>
                    <div class="mt-6">
                         <button onclick="handleGoToFiles()" class="w-full bg-white text-emerald-700 font-bold py-4 rounded-2xl flex items-center justify-center gap-2">
                            <i data-lucide="file-down" class="w-5 h-5"></i> Go to VCF Files
                         </button>
                    </div>
                </div>
                <script>
  atOptions = {
    'key' : '449632d046257ad4c637e9faf0eb2c5f',
    'format' : 'iframe',
    'height' : 50,
    'width' : 320,
    'params' : {}
  };
</script>
<script src="https://resignedincidentallysurprise.com/449632d046257ad4c637e9faf0eb2c5f/invoke.js"></script>
            </div>
            

            <div id="guest-view" class="space-y-6">
                <div class="bg-emerald-50 border border-emerald-100 p-5 rounded-3xl">
                    <div class="flex gap-4">
                        <div class="bg-white p-2 h-fit rounded-xl shadow-sm">
                            <i data-lucide="lock" class="text-emerald-600 w-5 h-5"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-emerald-900 text-sm">Restricted Access</h3>
                            <p class="text-xs text-emerald-800/70 leading-relaxed mt-1">
                                Join the directory to unlock the 10-batch VCF networking files.
                            </p>
                        </div>
                    </div>
                </div>

                <div id="form-container" class="bg-white rounded-3xl shadow-sm p-6 border border-slate-100">
                    <div class="mb-6">
                        <h2 class="text-xl font-bold text-slate-800">Register Your Business</h2>
                        <p class="text-xs text-slate-400 mt-1">Join thousands of Nigerian professionals.</p>
                    </div>
                  
                    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload="if(submitted){handleSuccess();}"></iframe>
                    
                    <form id="registration-form" class="space-y-5" 
                          action="https://docs.google.com/forms/d/e/1FAIpQLSc1Yz0jF5wANDrrZe_DgU5yMx6cWX_2BgzI8gNUHQUTe4XQCQ/formResponse" 
                          method="POST" 
                          target="hidden_iframe"
                          onsubmit="submitted=true;">
                        <div>
                            <label class="block text-[11px] font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1">Business/Brand Name</label>
                            <input required type="text" name="entry.403300635" placeholder="e.g. Lagos Tech Hub" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none transition-all input-focus text-sm">
                        </div>
                        <div>
                            <label class="block text-[11px] font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1">WhatsApp Business Number</label>
                            <input required type="tel" name="entry.1493637334" placeholder="0801 234 5678" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl outline-none transition-all input-focus text-sm">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-[11px] font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1">Category</label>
                                <select required name="entry.50410248" id="category-select" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl text-sm outline-none input-focus appearance-none">
                                    <option value="">Select Industry</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-[11px] font-bold text-slate-400 uppercase tracking-wider mb-2 ml-1">Location</label>
                                <select required name="entry.1635387367" id="state-select" class="w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl text-sm outline-none input-focus appearance-none">
                                    <option value="">Select State</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="w-full bg-emerald-600 text-white font-bold py-5 rounded-2xl hover:bg-emerald-700 shadow-xl shadow-emerald-100 active:scale-[0.98] transition-all flex items-center justify-center gap-2 text-sm uppercase">
                            JOIN & UNLOCK FILES
                        </button>
                    </form>
                </div>
            </div>
                <script>
  atOptions = {
    'key' : 'e13526877b246777764801d9b7306b39',
    'format' : 'iframe',
    'height' : 250,
    'width' : 300,
    'params' : {}
  };
</script>
<script src="https://resignedincidentallysurprise.com/e13526877b246777764801d9b7306b39/invoke.js"></script>
           
  
            <div id="success-container" class="hidden space-y-6">
                <div class="bg-white rounded-3xl shadow-xl p-8 text-center border border-emerald-50">
                    <div class="bg-emerald-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="party-popper" class="text-emerald-600 w-10 h-10"></i>
                    </div>
                    <h2 class="text-2xl font-800 text-slate-800">Registration Complete!</h2>
                    <p class="text-sm text-slate-500 mt-2 leading-relaxed">Access the VCF files and complete the share task to download.</p>
                    <div class="mt-8">
                        <button onclick="switchTab('download')" class="w-full bg-emerald-600 text-white font-bold py-4 rounded-2xl shadow-lg shadow-emerald-100 flex items-center justify-center gap-2">
                            <i data-lucide="download-cloud" class="w-5 h-5"></i> Access VCF Files
                        </button>
                    </div>
                </div>
            </div>
        </section>
        

        <!-- DOWNLOADS TAB -->
        <section id="tab-download" class="tab-content space-y-5">
            <div id="download-locked" class="py-12 text-center space-y-4">
                <div class="bg-slate-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto">
                    <i data-lucide="lock" class="text-slate-400 w-8 h-8"></i>
                </div>
                <h3 class="font-bold text-slate-800">Files Locked</h3>
                <p class="text-xs text-slate-500 px-10">Please register your business on the Home tab to access these files.</p>
                <button onclick="switchTab('home')" class="text-emerald-600 font-bold text-sm uppercase tracking-widest">Go to Home</button>
            </div>

            <div id="download-unlocked" class="hidden space-y-5">
                <div class="px-2 flex justify-between items-end">
                    <div>
                        <div class="flex items-center gap-2 text-emerald-600 mb-1">
                            <i data-lucide="check-circle-2" class="w-4 h-4"></i>
                            <span class="text-[10px] font-bold uppercase tracking-widest">Verified Member Access</span>
                        </div>
                        <h2 class="text-2xl font-800 text-slate-900 tracking-tight">Active Directories</h2>
                    </div>
                    <div class="text-right">
                        <p class="text-[10px] font-bold text-slate-400 uppercase">Last Update</p>
                        <p id="update-date" class="text-xs font-bold text-emerald-600">Jan 12, 2026</p>
                    </div>
                </div>
                
                <div id="vcf-list" class="space-y-4">
                    <!-- Cards generated by JS -->
                </div>

                <div class="bg-blue-50 border border-blue-100 p-5 rounded-3xl flex flex-col gap-3">
                    <div class="flex gap-4">
                        <i data-lucide="info" class="text-blue-600 shrink-0"></i>
                        <p class="text-xs text-blue-800/80 leading-relaxed">
                            A new batch of vendors is added every 24-48 hours. 
                            <a href="https://whatsapp.com/channel/0029VbC3ITpHVvTZ5btPTn0h" target="_blank" class="text-blue-700 font-bold underline">Join our Official WhatsApp Channel</a> 
                            for files upload updates without re-registering.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SAFETY TAB -->
        <section id="tab-safety" class="tab-content space-y-6">
            <div class="bg-slate-900 p-6 rounded-3xl text-white shadow-xl">
                <h2 class="text-xl font-bold flex items-center gap-2"><i data-lucide="shield"></i> Safety & Ethics</h2>
                <p class="text-xs opacity-90 mt-2">Protect your account and your business.</p>
            </div>
            <div class="bg-white p-6 rounded-3xl border border-slate-100 space-y-5">
                <div class="flex gap-4">
                    <div class="bg-blue-50 p-2 rounded-xl"><i data-lucide="key" class="text-blue-600 w-5 h-5"></i></div>
                    <div>
                        <h4 class="text-sm font-bold text-slate-800">Enable 2FA</h4>
                        <p class="text-xs text-slate-500 mt-1">Always keep 2-Step verification active on your WhatsApp.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t border-slate-100 flex justify-around items-center h-20 px-10 z-50 pb-2">
        <button onclick="switchTab('home')" class="nav-item active flex flex-col items-center gap-1" data-tab="home">
            <i data-lucide="home" class="w-6 h-6"></i>
            <span class="text-[10px] font-800 uppercase">Home</span>
        </button>
        <button onclick="switchTab('download')" class="nav-item flex flex-col items-center gap-1" data-tab="download">
            <i data-lucide="layers" class="w-6 h-6"></i>
            <span class="text-[10px] font-800 uppercase">Files</span>
        </button>
        <button onclick="switchTab('safety')" class="nav-item flex flex-col items-center gap-1" data-tab="safety">
            <i data-lucide="shield-check" class="w-6 h-6"></i>
            <span class="text-[10px] font-800 uppercase">Safety</span>
        </button>
    </nav>

    <script>
        /**
         * CHANGE YOUR FILE PATHS HERE
         * You can point these to your server or hosted VCF files
         */
        const VCF_FILES_URLS = {
            1: "NaijaProContacts1.vcf",
            2: "batch_2_contacts.vcf",
            3: "batch_3_contacts.vcf",
            4: "batch_4_contacts.vcf",
            5: "batch_5_contacts.vcf",
            6: "batch_6_contacts.vcf",
            7: "batch_7_contacts.vcf",
            8: "batch_8_contacts.vcf",
            9: "batch_9_contacts.vcf",
            10: "batch_10_contacts.vcf"
        };

        const CONFIG = {
            updateDate: "Updated Jan 30, 8:05 PM",
            shareTarget: 5, 
            shareText: "Grow your business contacts for free on NaijaPro! Register and get the latest VCF batches here: " + window.location.href,
            vcfData: [
                { id: 1, count: 66, status: "Ongoing" },
                { id: 2, count: 0, status: "Coming Soon" },
                { id: 3, count: 0, status: "Coming Soon" },
                { id: 4, count: 0, status: "Coming Soon" },
                { id: 5, count: 0, status: "Coming Soon" },
                { id: 6, count: 0, status: "Coming Soon" },
                { id: 7, count: 0, status: "Coming Soon" },
                { id: 8, count: 0, status: "Coming Soon" },
                { id: 9, count: 0, status: "Coming Soon" },
                { id: 10, count: 0, status: "Coming Soon" }
            ]
        };

        const IS_REGISTERED_KEY = 'naijapro_user_registered';
        const TASK_PROGRESS_KEY = 'naijapro_task_map'; 
        
        let submitted = false;
        let activeVcfId = null;

        const categories = ["Fashion & Lifestyle", "Gadgets & Electronics", "Real Estate", "Beauty & Skincare", "Logistics & Delivery", "Digital Assets/Crypto", "Automobiles", "Food & Groceries", "Interior Decor", "Education", "Consultancy", "Others"];
        const states = ["Lagos", "Abuja (FCT)", "Rivers", "Oyo", "Kano", "Ogun", "Enugu", "Delta", "Anambra", "Edo", "Abia", "Adamawa", "Akwa Ibom", "Bauchi", "Bayelsa", "Benue", "Borno", "Cross River", "Ebonyi", "Ekiti", "Gombe", "Imo", "Jigawa", "Kaduna", "Katsina", "Kebbi", "Kogi", "Kwara", "Nasarawa", "Niger", "Ondo", "Osun", "Plateau", "Sokoto", "Taraba", "Yobe", "Zamfara"];
        
        function getTaskProgress() {
            return JSON.parse(localStorage.getItem(TASK_PROGRESS_KEY) || '{}');
        }

        function renderVcfFiles() {
            const container = document.getElementById('vcf-list');
            const progress = getTaskProgress();
            
            document.getElementById('update-date').innerText = CONFIG.updateDate;

            container.innerHTML = CONFIG.vcfData.map(vcf => {
                const shareCount = progress[vcf.id] || 0;
                const isUnlocked = shareCount >= CONFIG.shareTarget;
                const percentage = (vcf.count / 1000) * 100;
                const isFirst = vcf.id === 1;
                const statusColor = vcf.count > 0 ? 'text-red-600 font-extrabold' : 'text-slate-400 font-bold';
                const pipelineColorClass = vcf.count > 0 ? '' : 'pipeline-empty';
                const fileUrl = VCF_FILES_URLS[vcf.id] || "#";
                
                let pipelineText = vcf.count === 0 ? "Empty - Not yet started" : "Filing in progress...";
                if(vcf.count >= 1000) pipelineText = "Full - New batch pending";

                let actionHtml = '';
                
                if (isUnlocked) {
                    actionHtml = `
                        <div class="space-y-3">
                            <a href="${fileUrl}" download="${fileUrl.split('/').pop()}" onclick="handleDownload(${vcf.id})" 
                               class="block w-full bg-slate-900 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 active:scale-95 transition-all text-sm">
                               <i data-lucide="download" class="w-4 h-4 text-emerald-400"></i> DOWNLOAD BATCH ${vcf.id}
                            </a>
                            <p class="text-[10px] font-bold text-emerald-600 text-center uppercase tracking-tight">Unlocked! Ready to save.</p>
                        </div>
                    `;
                } else {
                    actionHtml = `
                        <div class="space-y-3">
                            <button onclick="initiateShare(${vcf.id})" class="w-full bg-slate-100 text-slate-500 font-bold py-4 rounded-2xl flex items-center justify-center gap-3 active:bg-slate-200 transition-all text-sm group">
                               <i data-lucide="share-2" class="w-4 h-4 text-emerald-500 group-hover:scale-110 transition-transform"></i> 
                               SHARE TO UNLOCK (${shareCount}/${CONFIG.shareTarget})
                            </button>
                            <a href="https://whatsapp.com/channel/0029VbC3ITpHVvTZ5btPTn0h" target="_blank" class="w-full bg-emerald-600 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 active:scale-95 transition-all text-sm">
                                <i data-lucide="users" class="w-4 h-4"></i> JOIN WHATSAPP CHANNEL
                            </a>
                        </div>
                    `;
                }

                return `
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 space-y-4">
                        <div class="flex justify-between items-start">
                            <div class="flex gap-4 items-center">
                                <div class="bg-slate-50 ${vcf.count > 0 ? 'text-emerald-600' : 'text-slate-400'} p-4 rounded-2xl">
                                    <i data-lucide="file-spreadsheet" class="w-6 h-6"></i>
                                </div>
                                <div>
                                    <h4 class="font-800 text-lg text-slate-800">Batch ${vcf.id} VCF</h4>
                                    <p class="text-[10px] uppercase tracking-widest ${statusColor}">${vcf.status}</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-xs font-bold text-slate-800">${vcf.count}/1,000</p>
                                <p class="text-[9px] text-slate-400 uppercase">Capacity</p>
                            </div>
                        </div>

                        <div class="space-y-2">
                            <div class="pipeline-container">
                                <div class="pipeline-fill ${pipelineColorClass}" style="width: ${percentage}%"></div>
                            </div>
                            <div class="flex justify-between items-center">
                                <p class="text-[9px] font-bold text-slate-400 uppercase tracking-tighter">${pipelineText}</p>
                                ${vcf.count > 0 ? `<span class="text-[9px] font-bold text-red-500">${Math.round(percentage)}%</span>` : ''}
                            </div>
                        </div>

                        ${actionHtml}
                    </div>
                `;
            }).join('');
            lucide.createIcons();
        }

        function initiateShare(vcfId) {
            activeVcfId = vcfId;
            const shareUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(CONFIG.shareText)}`;
            window.open(shareUrl, '_blank');
            
            // Logic starts as soon as user returns to the tab
            window.onfocus = () => {
                window.onfocus = null;
                performVerification();
            };
        }

        async function performVerification() {
            const modal = document.getElementById('verify-modal');
            const progress = document.getElementById('verify-progress');
            modal.style.display = 'flex';
            
            // Removed security delays for a "Free Share" experience
            await new Promise(r => setTimeout(r, 800));

            modal.style.display = 'none';
            const taskMap = getTaskProgress();
            taskMap[activeVcfId] = (taskMap[activeVcfId] || 0) + 1;
            localStorage.setItem(TASK_PROGRESS_KEY, JSON.stringify(taskMap));
            
            if (taskMap[activeVcfId] >= CONFIG.shareTarget) {
                showAlert('Batch Unlocked', `Batch ${activeVcfId} is now ready for download.`, 'check-circle');
            }
            renderVcfFiles();
        }

        /**
         * INFINITE BUTTON LOGIC
         * Resets the counter to 0 after download so the user has to share again to get it again.
         */
        function handleDownload(vcfId) {
            setTimeout(() => {
                const taskMap = getTaskProgress();
                // Reset this specific batch back to locked (0 shares) for infinite cycle
                taskMap[vcfId] = 0; 
                localStorage.setItem(TASK_PROGRESS_KEY, JSON.stringify(taskMap));
                
                showAlert(
                    'Download Started', 
                    'Your file is downloading. The button has reset to allow future downloads.', 
                    'info'
                );
                
                setTimeout(() => renderVcfFiles(), 2000);
            }, 1000);
        }

        function handleGoToFiles() {
            document.getElementById('whatsapp-promo').style.display = 'flex';
        }

        function closePromo() {
            document.getElementById('whatsapp-promo').style.display = 'none';
            switchTab('download');
        }

        function checkUserStatus() {
            const isRegistered = localStorage.getItem(IS_REGISTERED_KEY);
            const guestView = document.getElementById('guest-view');
            const memberView = document.getElementById('member-view');
            const lockedDown = document.getElementById('download-locked');
            const unlockedDown = document.getElementById('download-unlocked');
            const statusDiv = document.getElementById('user-status');

            if (isRegistered) {
                guestView.classList.add('hidden');
                memberView.classList.remove('hidden');
                lockedDown.classList.add('hidden');
                unlockedDown.classList.remove('hidden');
                statusDiv.innerHTML = `<span class="h-2 w-2 bg-emerald-500 rounded-full animate-pulse"></span>
                                       <span class="text-[10px] font-bold text-emerald-600 uppercase tracking-tighter">Member</span>`;
                renderVcfFiles();
            } else {
                guestView.classList.remove('hidden');
                memberView.classList.add('hidden');
                lockedDown.classList.remove('hidden');
                unlockedDown.classList.add('hidden');
                statusDiv.innerHTML = `<span class="h-2 w-2 bg-slate-300 rounded-full"></span>
                                       <span class="text-[10px] font-bold text-slate-400 uppercase tracking-tighter">Guest</span>`;
            }
            lucide.createIcons();
        }

        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(`tab-${id}`).classList.add('active');
            const navBtn = document.querySelector(`[data-tab="${id}"]`);
            if(navBtn) navBtn.classList.add('active');
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function handleSuccess() {
            localStorage.setItem(IS_REGISTERED_KEY, 'true');
            document.getElementById('form-container').classList.add('hidden');
            document.getElementById('success-container').classList.remove('hidden');
            checkUserStatus();
        }

        function showAlert(title, message, iconName = 'info') {
            document.getElementById('alert-title').innerText = title;
            document.getElementById('alert-message').innerText = message;
            document.getElementById('alert-icon').innerHTML = `<i data-lucide="${iconName}" class="w-12 h-12 text-emerald-600 mx-auto"></i>`;
            document.getElementById('custom-alert').style.display = 'flex';
            lucide.createIcons();
        }

        function closeAlert() {
            document.getElementById('custom-alert').style.display = 'none';
        }

        const catSelect = document.getElementById('category-select');
        categories.forEach(c => catSelect.add(new Option(c, c)));
        const stSelect = document.getElementById('state-select');
        states.forEach(s => stSelect.add(new Option(s, s)));

        lucide.createIcons();
        checkUserStatus();
    </script>
</body>
</html>
